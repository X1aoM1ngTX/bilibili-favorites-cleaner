# 测试指南

本文档提供了哔哩哔哩收藏夹清理工具的详细测试指南，确保前后端功能正常运行。

## 🧪 测试环境准备

### 环境要求
- Node.js 14.0 或更高版本
- npm 6.0 或更高版本
- 现代浏览器（Chrome、Firefox、Safari、Edge）

### 启动测试环境

#### 方法一：使用快速启动脚本
```bash
# Windows
start.bat

# Linux/Mac
chmod +x start.sh
./start.sh
```

#### 方法二：手动启动
```bash
# 1. 安装依赖
npm run install:all

# 2. 启动开发环境
npm run dev
```

### 访问地址
- 前端应用：http://localhost:8080
- 后端API：http://localhost:3000
- 健康检查：http://localhost:3000/health

## 🔍 功能测试清单

### 1. 基础功能测试

#### 1.1 应用启动测试
- [ ] 后端服务正常启动（端口3000）
- [ ] 前端应用正常启动（端口8080）
- [ ] 浏览器能正常访问前端应用
- [ ] 控制台无错误信息

#### 1.2 API连通性测试
- [ ] 健康检查接口返回正常
- [ ] CORS配置正常工作
- [ ] API响应格式正确

### 2. 登录功能测试

#### 2.1 配置状态显示
- [ ] 页面加载时显示"检查中..."状态
- [ ] 未配置时显示"未配置"状态
- [ ] 已配置时显示"已配置"状态和用户ID

#### 2.2 嵌入式登录
- [ ] 点击"打开iframe登录"按钮能正常显示登录框
- [ ] iframe能正常加载登录页面
- [ ] 扫码登录功能正常工作
- [ ] 登录成功后能自动获取Cookie
- [ ] 登录成功后自动关闭iframe
- [ ] 登录成功后显示成功提示

#### 2.3 Cookie管理
- [ ] Cookie能正常显示在文本框中
- [ ] 复制Cookie功能正常工作
- [ ] 刷新Cookie功能正常工作
- [ ] 复制成功后显示提示信息

#### 2.4 手动配置
- [ ] 点击"手动配置Cookie"能显示输入框
- [ ] 输入正确的Cookie能保存成功
- [ ] 输入错误的Cookie能显示错误提示
- [ ] 保存成功后显示成功提示

### 3. 收藏夹管理测试

#### 3.1 收藏夹列表加载
- [ ] 切换到"清理收藏夹"标签页能自动加载列表
- [ ] 收藏夹列表能正常显示
- [ ] 显示收藏夹名称、ID和视频数量
- [ ] 加载时显示加载动画
- [ ] 加载失败时显示错误信息

#### 3.2 收藏夹选择
- [ ] 点击复选框能正常选择/取消选择
- [ ] "全选"按钮能选择所有收藏夹
- [ ] "取消全选"按钮能取消所有选择
- [ ] 选中的收藏夹有视觉反馈（高亮显示）
- [ ] 选中计数能正确更新

### 4. 清理功能测试

#### 4.1 单个收藏夹清理
- [ ] 选择单个收藏夹后"清理选中的收藏夹"按钮可用
- [ ] 点击清理按钮能正常执行清理
- [ ] 清理过程中显示进度条和状态信息
- [ ] 清理完成后显示结果统计
- [ ] 收藏夹状态能正确更新

#### 4.2 批量清理
- [ ] 选择多个收藏夹后"清理选中的收藏夹"按钮可用
- [ ] 批量清理能正常执行
- [ ] 进度条能正确显示进度
- [ ] 每个收藏夹的状态能正确更新
- [ ] 最终统计信息准确

#### 4.3 全部清理
- [ ] "清理所有收藏夹"按钮功能正常
- [ ] 能清理所有收藏夹
- [ ] 进度显示和结果统计正确

### 5. 错误处理测试

#### 5.1 网络错误
- [ ] 后端服务停止时前端能正确显示错误
- [ ] 网络断开时能显示错误提示
- [ ] 请求超时时能正确处理

#### 5.2 数据错误
- [ ] 无效Cookie时能显示错误提示
- [ ] API返回错误时能正确处理
- [ ] 数据格式错误时能正确处理

#### 5.3 用户操作错误
- [ ] 未登录时尝试清理能显示提示
- [ ] 未选择收藏夹时点击清理能显示提示
- [ ] 输入无效Cookie时能显示验证错误

## 🔧 性能测试

### 1. 前端性能
- [ ] 页面加载时间在可接受范围内
- [ ] 组件切换流畅无卡顿
- [ ] 大量收藏夹时列表滚动流畅
- [ ] 内存使用稳定，无内存泄漏

### 2. 后端性能
- [ ] API响应时间在可接受范围内
- [ ] 并发请求处理正常
- [ ] 大量数据处理时性能稳定

### 3. 网络性能
- [ ] 静态资源加载速度快
- [ ] API请求响应及时
- [ ] 错误重试机制正常

## 📱 兼容性测试

### 1. 浏览器兼容性
- [ ] Chrome（最新版本）功能正常
- [ ] Firefox（最新版本）功能正常
- [ ] Safari（最新版本）功能正常
- [ ] Edge（最新版本）功能正常

### 2. 响应式设计
- [ ] 桌面端显示正常
- [ ] 平板端显示正常
- [ ] 手机端显示正常
- [ ] 不同屏幕尺寸下布局正确

### 3. 操作系统兼容性
- [ ] Windows系统功能正常
- [ ] macOS系统功能正常
- [ ] Linux系统功能正常

## 🐛 常见问题排查

### 1. 启动问题
**问题**: 服务启动失败
**排查步骤**:
1. 检查Node.js版本是否符合要求
2. 检查端口是否被占用
3. 检查依赖是否正确安装
4. 查看控制台错误信息

### 2. 连接问题
**问题**: 前端无法连接后端
**排查步骤**:
1. 检查后端服务是否正常启动
2. 检查CORS配置是否正确
3. 检查API地址配置是否正确
4. 检查防火墙设置

### 3. 功能问题
**问题**: 登录或清理功能异常
**排查步骤**:
1. 检查网络连接是否正常
2. 检查Cookie是否有效
3. 检查API接口是否正常
4. 查看浏览器控制台错误信息

## 📝 测试报告模板

### 测试环境
- 操作系统：
- 浏览器：
- Node.js版本：
- 测试时间：

### 测试结果
| 功能模块 | 测试项目 | 测试结果 | 备注 |
|---------|---------|---------|------|
| 登录功能 | 嵌入式登录 | ✅/❌ | |
| 登录功能 | 手动配置 | ✅/❌ | |
| 收藏夹管理 | 列表加载 | ✅/❌ | |
| 收藏夹管理 | 选择功能 | ✅/❌ | |
| 清理功能 | 单个清理 | ✅/❌ | |
| 清理功能 | 批量清理 | ✅/❌ | |

### 发现的问题
1. 问题描述：
   - 复现步骤：
   - 预期结果：
   - 实际结果：
   - 严重程度：

### 改进建议
1. 建议内容：
   - 改进理由：
   - 预期效果：

---

## 🎯 测试完成标准

项目被认为测试通过的条件：
- [ ] 所有核心功能正常工作
- [ ] 错误处理机制完善
- [ ] 性能表现符合要求
- [ ] 兼容性测试通过
- [ ] 用户体验良好
- [ ] 无严重bug存在

测试完成后，请更新此文档并提交测试报告。